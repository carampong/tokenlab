
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TokenLabs | Create Your Crypto Legacy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #030712;
            color: #f9fafb;
        }
        .mono {
            font-family: 'JetBrains Mono', monospace;
        }
        .gradient-border {
            position: relative;
            border-radius: 0.75rem;
            background: linear-gradient(to right, #6366f1, #a855f7, #ec4899);
            padding: 1px;
        }
        .gradient-border-content {
            background: #030712;
            border-radius: 0.75rem;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #030712;
        }
        ::-webkit-scrollbar-thumb {
            background: #374151;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #4b5563;
        }
        @keyframes progress {
            from { width: 0%; }
            to { width: 85%; }
        }
    </style>
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@^19.2.3",
        "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
        "react/": "https://esm.sh/react@^19.2.3/",
        "@google/genai": "https://esm.sh/@google/genai@^1.34.0",
        "lucide-react": "https://esm.sh/lucide-react@^0.562.0"
      }
    }
    </script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect } from 'react';
        import ReactDOM from 'react-dom/client';
        import { 
            Coins, Rocket, ShieldCheck, Zap, ChevronRight, Wallet, Cpu, 
            CheckCircle2, ExternalLink, Info, AlertTriangle, Loader2, 
            Sparkles, ArrowLeft, Settings, Lock, Copy, Hash, QrCode 
        } from 'lucide-react';
        import { GoogleGenAI, Type } from "@google/genai";

        // --- Types ---
        const BlockchainNetwork = {
            SOLANA: 'SOLANA',
            ETHEREUM: 'ETHEREUM',
            XRP: 'XRP'
        };

        // --- Defaults ---
        const DEFAULT_ADMIN_SETTINGS = {
            solanaWallet: 'ADminSoLanaWaLLetAddr3ssHeresm7v5G',
            ethereumWallet: '0xADminEthWaLLetAddr3ssHeres67891',
            xrpWallet: 'rADminXrpWaLLetAddr3ssHeresX123',
            serviceFee: 0.01
        };

        // --- Gemini Service ---
        const ai = new GoogleGenAI({ apiKey: process.env.API_KEY || '' });

        async function analyzeTokenomics(config) {
            const prompt = `Analyze the following cryptocurrency token proposal and provide evaluation.
            Network: ${config.network}, Name: ${config.name}, Symbol: ${config.symbol}, Supply: ${config.totalSupply}.
            Provide a JSON response with viabilityScore (0-100), marketAnalysis, suggestedImprovements (array), and riskWarnings (array).`;

            try {
                const response = await ai.models.generateContent({
                    model: "gemini-3-flash-preview",
                    contents: prompt,
                    config: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: Type.OBJECT,
                            properties: {
                                viabilityScore: { type: Type.NUMBER },
                                marketAnalysis: { type: Type.STRING },
                                suggestedImprovements: { type: Type.ARRAY, items: { type: Type.STRING } },
                                riskWarnings: { type: Type.ARRAY, items: { type: Type.STRING } }
                            },
                            required: ["viabilityScore", "marketAnalysis", "suggestedImprovements", "riskWarnings"]
                        }
                    }
                });
                return JSON.parse(response.text);
            } catch (e) {
                return { viabilityScore: 50, marketAnalysis: "Basic configuration detected.", suggestedImprovements: ["Lock liquidity"], riskWarnings: ["Market volatility"] };
            }
        }

        async function generateTokenMetadata(config) {
            const prompt = `Write a compelling 100-word description for a token named ${config.name} ($${config.symbol}) on ${config.network}. Utility: ${config.description}`;
            try {
                const response = await ai.models.generateContent({ model: "gemini-3-flash-preview", contents: prompt });
                return response.text;
            } catch (e) { return config.description; }
        }

        // --- Helpers ---
        const getQrUrl = (address) => `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(address)}&bgcolor=ffffff&color=030712&margin=10`;

        // --- Components ---

        const NetworkCard = ({ network, selected, onSelect }) => {
            const configs = {
                [BlockchainNetwork.SOLANA]: { name: 'Solana', icon: <Zap className="w-8 h-8 text-purple-400" />, desc: 'Ultra-fast, low cost.', color: 'border-purple-500/50 hover:border-purple-400' },
                [BlockchainNetwork.ETHEREUM]: { name: 'Ethereum', icon: <Cpu className="w-8 h-8 text-blue-400" />, desc: 'Smart contract standard.', color: 'border-blue-500/50 hover:border-blue-400' },
                [BlockchainNetwork.XRP]: { name: 'XRP Ledger', icon: <Coins className="w-8 h-8 text-green-400" />, desc: 'Sustainable & scalable.', color: 'border-green-500/50 hover:border-green-400' }
            };
            const c = configs[network];
            return (
                <button onClick={() => onSelect(network)} className={`p-6 rounded-2xl border-2 transition-all duration-300 text-left flex flex-col gap-4 group ${selected ? 'bg-indigo-500/10 border-indigo-500 shadow-[0_0_20px_rgba(99,102,241,0.2)]' : `bg-gray-900/50 ${c.color}`}`}>
                    <div className="p-3 rounded-xl bg-gray-800 w-fit group-hover:scale-110 transition-transform">{c.icon}</div>
                    <div><h3 className="text-xl font-bold">{c.name}</h3><p className="text-gray-400 text-sm mt-1">{c.desc}</p></div>
                </button>
            );
        };

        const SuccessCelebration = ({ config, status }) => (
            <div className="text-center py-12 animate-in fade-in zoom-in duration-500">
                <CheckCircle2 className="w-24 h-24 text-green-400 mx-auto" />
                <h2 className="text-3xl font-extrabold mt-8 mb-2">Token Successfully Minted!</h2>
                <p className="text-gray-400 max-w-md mx-auto mb-8">Asset live on <strong>{config.network}</strong>.</p>
                <div className="bg-gray-900 border border-gray-800 rounded-2xl p-6 text-left max-w-lg mx-auto mb-8 space-y-4">
                    <div>
                        <label className="text-xs text-gray-500 uppercase font-bold">Address</label>
                        <div className="flex items-center justify-between bg-black/50 p-3 rounded-lg mt-1">
                            <code className="text-indigo-400 text-sm truncate">{status.contractAddress}</code>
                            <button className="text-xs text-gray-400 underline" onClick={() => navigator.clipboard.writeText(status.contractAddress)}>Copy</button>
                        </div>
                    </div>
                </div>
                <button onClick={() => window.location.reload()} className="px-8 py-3 bg-indigo-600 rounded-xl font-bold">Start Again</button>
            </div>
        );

        const AdminPanel = ({ settings, onUpdate, onBack }) => {
            const [localSettings, setLocalSettings] = useState(settings);
            const [passInput, setPassInput] = useState('');
            const [isUnlocked, setIsUnlocked] = useState(false);
            if (!isUnlocked) return (
                <div className="max-w-md mx-auto py-20 text-center space-y-6 bg-gray-900 p-8 rounded-3xl border border-gray-800">
                    <Lock className="w-12 h-12 text-indigo-400 mx-auto" />
                    <h2 className="text-2xl font-black">Admin Access</h2>
                    <input type="password" placeholder="Password" className="w-full bg-black border border-gray-700 rounded-xl px-4 py-3" value={passInput} onChange={e => setPassInput(e.target.value)} onKeyDown={e => e.key === 'Enter' && (passInput === 'Goodnews123' ? setIsUnlocked(true) : alert('Wrong'))} />
                    <button onClick={() => passInput === 'Goodnews123' ? setIsUnlocked(true) : alert('Wrong')} className="w-full py-3 bg-indigo-600 rounded-xl font-bold">Unlock</button>
                    <button onClick={onBack} className="text-gray-500 text-sm">Cancel</button>
                </div>
            );
            return (
                <div className="max-w-4xl mx-auto py-12 space-y-8 animate-in slide-in-from-bottom-4">
                    <button onClick={onBack} className="flex items-center gap-2 text-gray-500 hover:text-white"><ArrowLeft className="w-4 h-4" />Back</button>
                    <div className="bg-gray-900 border border-gray-800 rounded-3xl p-8 space-y-10">
                        <h1 className="text-3xl font-black border-b border-gray-800 pb-6">Admin Settings</h1>
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                            {Object.entries({ Solana: 'solanaWallet', Ethereum: 'ethereumWallet', XRP: 'xrpWallet' }).map(([label, key]) => (
                                <div key={key} className="space-y-4">
                                    <label className="text-sm font-bold text-gray-500 uppercase">{label} Receiver</label>
                                    <div className="flex gap-4">
                                        <input className="flex-1 bg-black border border-gray-700 rounded-xl px-4 py-3 text-indigo-400 mono text-sm" value={localSettings[key]} onChange={e => setLocalSettings({...localSettings, [key]: e.target.value})} />
                                        <img src={getQrUrl(localSettings[key])} className="w-16 h-16 bg-white p-1 rounded-lg" />
                                    </div>
                                </div>
                            ))}
                        </div>
                        <div className="pt-6 border-t border-gray-800 flex justify-end">
                            <button onClick={() => { onUpdate(localSettings); alert('Saved'); }} className="px-8 py-3 bg-indigo-600 rounded-xl font-bold">Save All</button>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [isAdminView, setIsAdminView] = useState(false);
            const [adminSettings, setAdminSettings] = useState(() => {
                const saved = localStorage.getItem('tokenlabs_admin_v1');
                return saved ? JSON.parse(saved) : DEFAULT_ADMIN_SETTINGS;
            });

            const [step, setStep] = useState('setup');
            const [network, setNetwork] = useState(BlockchainNetwork.SOLANA);
            const [config, setConfig] = useState({ name: '', symbol: '', decimals: 9, totalSupply: '1000000000', description: '', network: BlockchainNetwork.SOLANA });
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [analysis, setAnalysis] = useState(null);
            const [isMinting, setIsMinting] = useState(false);
            const [status, setStatus] = useState({ step: 'setup' });
            const [paymentHash, setPaymentHash] = useState('');

            useEffect(() => { setConfig(p => ({ ...p, network })); }, [network]);

            const updateAdminSettings = (s) => { setAdminSettings(s); localStorage.setItem('tokenlabs_admin_v1', JSON.stringify(s)); };

            const handlePaymentSubmit = async () => {
                if (!paymentHash.trim()) return alert("TXID required");
                setStep('minting'); setIsMinting(true);
                await new Promise(r => setTimeout(r, 4000));
                setStatus({ step: 'success', contractAddress: '7nE8v5G...p9w2k', txHash: '5f2d6...3e9a' });
                setStep('success'); setIsMinting(false);
            };

            const getTargetWallet = () => adminSettings[network.toLowerCase() + 'Wallet'];
            const getCurrency = () => network === 'SOLANA' ? 'SOL' : network === 'ETHEREUM' ? 'ETH' : 'XRP';

            if (isAdminView) return <AdminPanel settings={adminSettings} onUpdate={updateAdminSettings} onBack={() => setIsAdminView(false)} />;

            return (
                <div className="min-h-screen flex flex-col">
                    <nav className="border-b border-gray-800 px-6 py-4 flex items-center justify-between bg-black/20 backdrop-blur-md sticky top-0 z-50">
                        <div className="flex items-center gap-2 group cursor-pointer" onClick={() => window.location.reload()}>
                            <Rocket className="w-6 h-6 text-indigo-500" />
                            <span className="text-2xl font-black tracking-tighter bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-400">TOKENLABS</span>
                        </div>
                        <div className="hidden md:flex gap-8 text-sm text-gray-400">
                            <button onClick={() => setIsAdminView(true)} className="hover:text-white">Admin</button>
                        </div>
                        <button className="px-5 py-2.5 bg-gray-900 border border-gray-700 rounded-full text-sm font-bold flex items-center gap-2">
                            <Wallet className="w-4 h-4" /> Connect
                        </button>
                    </nav>

                    <main className="flex-1 max-w-5xl mx-auto w-full px-6 py-12">
                        {step === 'setup' && (
                            <div className="grid grid-cols-1 lg:grid-cols-3 gap-12 animate-in slide-in-from-bottom-4">
                                <div className="lg:col-span-2 space-y-8">
                                    <h1 className="text-4xl font-extrabold">Create your token.</h1>
                                    <div className="grid grid-cols-1 sm:grid-cols-3 gap-4">
                                        <NetworkCard network={BlockchainNetwork.SOLANA} selected={network === BlockchainNetwork.SOLANA} onSelect={setNetwork} />
                                        <NetworkCard network={BlockchainNetwork.ETHEREUM} selected={network === BlockchainNetwork.ETHEREUM} onSelect={setNetwork} />
                                        <NetworkCard network={BlockchainNetwork.XRP} selected={network === BlockchainNetwork.XRP} onSelect={setNetwork} />
                                    </div>
                                    <div className="bg-gray-900/40 border border-gray-800 p-8 rounded-3xl space-y-6">
                                        <input placeholder="Token Name" className="w-full bg-black/50 border border-gray-700 rounded-xl px-4 py-3" value={config.name} onChange={e => setConfig({...config, name: e.target.value})} />
                                        <input placeholder="Symbol" className="w-full bg-black/50 border border-gray-700 rounded-xl px-4 py-3" value={config.symbol} onChange={e => setConfig({...config, symbol: e.target.value})} />
                                        <textarea rows={4} placeholder="Description" className="w-full bg-black/50 border border-gray-700 rounded-xl px-4 py-3" value={config.description} onChange={e => setConfig({...config, description: e.target.value})} />
                                        <button onClick={() => setStep('payment')} disabled={!config.name || !config.symbol} className="w-full py-4 bg-indigo-600 rounded-2xl font-black disabled:opacity-50">Review & Pay</button>
                                    </div>
                                </div>
                                <div className="space-y-6">
                                    <div className="bg-gray-900 border border-gray-800 p-6 rounded-3xl">
                                        <h4 className="font-bold mb-4">Estimated Costs</h4>
                                        <div className="flex justify-between text-sm"><span>Fee</span><span className="text-indigo-400">{adminSettings.serviceFee} {getCurrency()}</span></div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {step === 'payment' && (
                            <div className="max-w-4xl mx-auto space-y-8 animate-in slide-in-from-right-4">
                                <button onClick={() => setStep('setup')} className="flex items-center gap-2 text-gray-500"><ArrowLeft className="w-4 h-4" />Back</button>
                                <div className="bg-gray-900 border border-gray-800 rounded-3xl overflow-hidden grid grid-cols-1 md:grid-cols-12">
                                    <div className="md:col-span-4 bg-white p-8 flex flex-col items-center justify-center gap-4">
                                        <img src={getQrUrl(getTargetWallet())} className="w-full aspect-square" />
                                        <span className="text-[#030712] text-xs font-black">SCAN TO PAY</span>
                                    </div>
                                    <div className="md:col-span-8 p-8 space-y-6">
                                        <div><h3 className="text-sm font-bold text-indigo-400">AMOUNT</h3><div className="text-4xl font-black">{(adminSettings.serviceFee + 0.005).toFixed(3)} {getCurrency()}</div></div>
                                        <div className="space-y-2">
                                            <label className="text-xs font-bold text-gray-500">RECEIVER ADDRESS</label>
                                            <div className="bg-black border border-gray-700 p-4 rounded-xl flex justify-between items-center group">
                                                <code className="text-indigo-400 text-sm truncate">{getTargetWallet()}</code>
                                                <Copy className="w-4 h-4 cursor-pointer" onClick={() => { navigator.clipboard.writeText(getTargetWallet()); alert('Copied'); }} />
                                            </div>
                                        </div>
                                        <input placeholder="Paste TXID here" className="w-full bg-black border border-gray-700 rounded-xl px-4 py-3" value={paymentHash} onChange={e => setPaymentHash(e.target.value)} />
                                        <button onClick={handlePaymentSubmit} className="w-full py-4 bg-indigo-600 rounded-2xl font-black">Verify & Mint</button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {step === 'minting' && (
                            <div className="text-center py-20 animate-pulse">
                                <Rocket className="w-16 h-16 text-indigo-400 mx-auto animate-bounce" />
                                <h2 className="text-3xl font-black mt-8">Minting Asset...</h2>
                                <p className="text-gray-500">Deploying smart contract to {network}</p>
                            </div>
                        )}

                        {step === 'success' && <SuccessCelebration config={config} status={status} />}
                    </main>

                    <footer className="border-t border-gray-800 py-12 px-6 bg-black/40 text-center text-xs text-gray-500">
                        <p>Â© 2024 TOKENLABS PROTOCOLS INC. ALL RIGHTS RESERVED.</p>
                        <button onClick={() => setIsAdminView(true)} className="mt-4 font-bold text-indigo-400">ADMIN PORTAL</button>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
